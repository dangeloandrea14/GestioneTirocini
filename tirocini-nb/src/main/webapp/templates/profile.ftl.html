<#ftl encoding='UTF-8'>
<#if userObject.studente??>
<div class="col-sm-8 mx-auto">
    <h2 class="text-dark text-center" id="dettagli">
        <i class="fas fa-user-graduate text-primary"></i>
        Informazioni </h2>
    <p class="card-text text-center text-secondary">
        <b class="text-primary">
            ${userObject.studente.nome} ${userObject.studente.cognome}
        </b><br><br>
        Telefono: <b>${userObject.studente.telefono}</b><br>
        Email: <b>${userObject.studente.email}</b><br>
    </p>
</div>
<hr>


<div>

    <#if tirocini?? && tirocini?size != 0>
    <div class="container">
        <div class="row">
            <div class="col-lg">
                <h1 class="text-secondary text-center" id="aziende">Tirocini attivi</h1>
            </div>
        </div>
    </div>
    <hr>
    <#list tirocini as tirocinio>
    <div class="col-md col-sm-12 ">
        <div class="card text-white  mb-3 bg-primary">
            <div class="card-body">
                <h5 class="card-title">
                    <small class="text-light">presso</small>
                    ${tirocinio.azienda.nome}</h5>
                <p class="card-text">${tirocinio.offerta.orari}</p>
                <p class="card-text">${tirocinio.offerta.luogo}</p>
                <hr>
                <h3 class="card-title">Descrizione</h3>
                <p class="cardtext">${tirocinio.offerta.obiettivi}</p>
                <a class="card-footer text-light cardtext btn bg-altro" href="DettagliOfferta?o=${tirocinio.offerta.key}">Mostra dettagli</a>
            </div>
        </div>
    </div>
    </#list>
    <#else>
    <p class="text-secondary text-center">
        <i class="fas fa-info-circle"></i>
        Nessun tirocinio attualmente attivo.
    </p>
    </#if>


    <#if candidature?? && candidature?size != 0>
    <div class="container">
        <div class="row">
            <div class="col">
                <h1 class="text-secondary text-center" id="aziende">Candidature in attesa di risposta</h1>
            </div>
        </div>
    </div>
    <#list candidature as candidatura>
    <div class="col-md col-sm-12 ">
        <div class="card mb-3 still shadow-sm">
            <a class="card-header bg-primary text-center text-decoration-none" 
               href='DettagliAzienda?a=${candidatura.offerta.azienda.key}'>
                <!--
                <small class="text-light">presso</small>
                -->
                <b class="text-white">
                    <i class="far fa-building"></i>
                    ${candidatura.offerta.azienda.nome}
                </b>
            </a>
            <div class="card-body">
                <#assign offerta = candidatura.offerta>
                <#include "fragments/offerDescription.ftl.html">
                <!--
                <a class="card-footer text-light cardtext btn bg-altro" href="DettagliOfferta?o=${candidatura.offerta.key}">Mostra dettagli</a>
                -->
            </div>
        </div>
    </div>
    </#list>
    <#else>
    <p>
        <i class="fas fa-info-circle text-center"></i>
        Nessuna candidatura in attesa di risposta.
    </p>
    </#if>

</div>


<#elseif userObject.azienda??>
<div>
    <h2 class="text-dark text-center" id="dettagli">
        <i class="far fa-building text-primary"></i>
        Informazioni</h2>
    <p class="text-secondary text-center mx-auto">
        <b class="text-primary">${userObject.azienda.nome}</b><br><br>
        Partita IVA: <b>${userObject.azienda.iva}</b><br>
        Responsabile: <b class="text-primary">${userObject.azienda.nomeResponsabile} ${userObject.azienda.cognomeResponsabile}</b><br>
        Telefono Responsabile: <b>${userObject.azienda.telefonoResponsabile}</b><br>
        Email Responsabile: <b>${userObject.azienda.emailResponsabile}</b><br>
        Legale: <b>${userObject.azienda.nomeCognomeLegale}</b><br>
    </p>

    <hr>
</div>

<div>
    <#if offerte?? && offerte?size != 0>
    <div class="container">
        <div class="row">
            <div class="col"></div>
            <div class="col">
                <h1 class="text-secondary text-center" id="aziende">Offerte attive</h1>
            </div>
            <div class="col text-right my-auto">
                <a href="newOffer" class="btn btn-primary">
                    <i class="fas fa-plus-circle"></i>
                    Nuova</a>
            </div>
        </div>
    </div>
    <#list offerte as offerta>
    <div class="col-md col-sm-12 ">
        <div class="card mb-3 still shadow-sm">
            <div class="card-body">
                <#include "fragments/offerDescription.ftl.html">
            </div>

            <form class="card-footer"
                  action="Gestioneofferta" id="gestioneofferta">
                <!--
                <a class="btn btn-outline-primary" 
                   href="DettagliOfferta?o=${offerta.key}">
                    Mostra dettagli</a>
                -->
                <input type="hidden" id="oid" name="oid" value="${offerta.key}">
                <button class="btn btn-primary mx-auto" form="gestioneofferta" 
                        type="submit">
                    <i class="fas fa-cogs"></i>
                    Gestisci </button> <br>
            </form>
        </div>
    </div>
    </#list>
    <hr class="my-5">
    <#else>
    <p>
        <i class="fas fa-info-circle text-center"></i>
        Nessuna offerta attiva.
    </p>
    </#if>

    <#if tirociniazienda?? && tirociniazienda?size != 0>
    <div class="container">
        <div class="row">
            <div class="col"></div>
            <div class="col">
                <h1 class="text-secondary text-center" id="aziende">Tirocini attivi</h1>
            </div>
            <div class="col"></div>
        </div>
    </div>
    <#list tirociniazienda as tirocinio>
    <div class="col-md col-sm-12 ">
        <div class="card mb-3 still shadow-sm">
            <a class="card-header bg-primary text-decoration-none text-center" 
               href="student?id=${tirocinio.studente.key}">
                <!--
                <small class="text-light">con lo studente:</small>
                -->
                <b class="text-white">
                    <i class="fas fa-user-graduate"></i>
                    ${tirocinio.studente.nome} ${tirocinio.studente.cognome}
                </b>
            </a>
            <div class="card-body">
                <#assign offerta = tirocinio.offerta>
                <#include "fragments/offerDescription.ftl.html">
                <!--
                <a class="btn btn-outline-primary" 
                href="DettagliOfferta?o=${tirocinio.offerta.key}">
                Mostra dettagli</a>
                -->
            </div>
            <div class="card-footer">
                <a class="btn btn-success" 
                   href="Conclusione?i=${tirocinio.key}">
                    <i class="fas fa-check"></i>
                    Concludi</a>
            </div>
        </div>
    </div>
    </#list>
    <#else>
    <p>
        <i class="fas fa-info-circle text-center"></i>
        Nessun tirocinio attivo.
    </p>
    </#if>


</div>

</#if>